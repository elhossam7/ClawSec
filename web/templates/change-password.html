{{define "change-password"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinel â€” Change Password</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36'%3E%3Cpath d='M18 2L4 9v9c0 8.3 5.9 16 14 18 8.1-2 14-9.7 14-18V9L18 2z' fill='%2300d4ff'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="login-page">
        <div class="login-card">
            <div class="login-logo">
                <h1>Change Password</h1>
                {{if .IsDefault}}
                <p style="color: var(--warning);">You are using the default password. Please change it now.</p>
                {{else}}
                <p>Update your account password</p>
                {{end}}
            </div>

            {{if .Error}}
            <div class="login-error">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0;">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                {{.Error}}
            </div>
            {{end}}

            <form action="/change-password" method="POST">
                <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                <div class="form-group">
                    <label for="new_password" class="form-label">New Password</label>
                    <input id="new_password" name="new_password" type="password" required
                           class="form-input" placeholder="Minimum 8 characters" minlength="8">
                </div>
                <div class="form-group">
                    <label for="confirm_password" class="form-label">Confirm Password</label>
                    <input id="confirm_password" name="confirm_password" type="password" required
                           class="form-input" placeholder="Repeat new password" minlength="8">
                </div>
                <button type="submit" class="login-btn">
                    Update Password
                </button>
            </form>

            {{if not .IsDefault}}
            <p style="text-align:center; margin-top:16px;">
                <a href="/" style="color: var(--accent); text-decoration: none; font-size: 0.85rem;">Back to Dashboard</a>
            </p>
            {{end}}
        </div>
    </div>
</body>
</html>
{{end}}
